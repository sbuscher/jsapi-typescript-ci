import { ca as s$1, t, h as e, s as s$2, e as a$1, q as f$2, aY as t$1, ao as R, cu as M$2, d8 as M$3, r } from '../index.js';
import { i as i$1, u as u$2 } from './pixelUtils.db461856.js';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const a=new Map;a.set("meter-per-second",1),a.set("kilometer-per-hour",.277778),a.set("knots",.514444),a.set("feet-per-second",.3048),a.set("mile-per-hour",.44704);const s=180/Math.PI,i=5,h$1=new s$1({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});function l(t,e){return a.get(t)/a.get(e)||1}function c$1(t){return (450-t)%360}function u$1(t,e="geographic"){const[n,r]=t,o=Math.sqrt(n*n+r*r);let a=Math.atan2(r,n)*s;return a=(360+a)%360,"geographic"===e&&(a=c$1(a)),[o,a]}function f$1(t,e="geographic"){let n=t[1];"geographic"===e&&(n=c$1(n)),n%=360;const r=t[0];return [r*Math.cos(n/s),r*Math.sin(n/s)]}function p$1(t$1,r,a,s="geographic"){if(!i$1(t$1)||t(a))return t$1;const i="vector-magdir"===r?t$1.clone():e(m$1(t$1,r)),h=i.pixels[1];for(let e=0;e<h.length;e++)h[e]="geographic"===s?(h[e]+a[e]+270)%360:(h[e]+360-a[e])%360;return "vector-magdir"===r?i:m$1(i,"vector-magdir")}function m$1(t,e,n="geographic",a=1){if(!i$1(t))return t;const{pixels:s,width:i,height:h}=t,l=i*h,c=s[0],p=s[1],m=t.pixelType.startsWith("f")?t.pixelType:"f32",d=u$2.createEmptyBand(m,l),M=u$2.createEmptyBand(m,l);let g=0;for(let r=0;r<h;r++)for(let t=0;t<i;t++)"vector-uv"===e?([d[g],M[g]]=u$1([c[g],p[g]],n),d[g]*=a):([d[g],M[g]]=f$1([c[g],p[g]],n),d[g]*=a,M[g]*=a),g++;const x=new u$2({pixelType:m,width:t.width,height:t.height,mask:t.mask,validPixelCount:t.validPixelCount,maskIsAlpha:t.maskIsAlpha,pixels:[d,M]});return x.updateStatistics(),x}function d$1(t,e,n=1){if(1===n||!i$1(t))return t;const r=t.clone(),{pixels:a,width:s,height:i}=r,h=a[0],l=a[1];let c=0;for(let o=0;o<i;o++)for(let t=0;t<s;t++)"vector-uv"===e?(h[c]*=n,l[c]*=n):h[c]*=n,c++;return r.updateStatistics(),r}function M$1(t$1,n,r,o,a){if(t(a)||!a.spatialReference.equals(t$1.spatialReference))return {extent:t$1,width:Math.round(n/o),height:Math.round(r/o),resolution:t$1.width/n};const s=a.xmin,i=a.ymax,h=(t$1.xmax-t$1.xmin)/n*o,l=(t$1.ymax-t$1.ymin)/r*o,c=(h+l)/2;return t$1.xmin=s+Math.floor((t$1.xmin-s)/h)*h,t$1.xmax=s+Math.ceil((t$1.xmax-s)/h)*h,t$1.ymin=i+Math.floor((t$1.ymin-i)/l)*l,t$1.ymax=i+Math.ceil((t$1.ymax-i)/l)*l,{extent:t$1,width:Math.round(t$1.width/h),height:Math.round(t$1.height/l),resolution:c}}const g$1=x$1(0,0,0);function x$1(t=0,e=0,n=Math.PI,r=!0){r&&(n=(2*Math.PI-n)%(2*Math.PI));const o=r?-1:1,a=13*o,s=-7*o,i=-2*o,h=-16*o,l=21.75,[c,u]=w$1(0,e+a,n,l),[f,p]=w$1(t-5.5,e+s,n,l),[m,d]=w$1(t+5.5,e+s,n,l),[M,g]=w$1(t-1.5,e+i,n,l),[x,k]=w$1(t+1.5,e+i,n,l),[y,P]=w$1(t-1.5,e+h,n,l),[b,I]=w$1(t+1.5,e+h,n,l);return [c,u,f,p,M,g,x,k,m,d,y,P,b,I]}function k(t=0,e=Math.PI,n=!0){n&&(e=(2*Math.PI-e)%(2*Math.PI));const r=10,o=n?-1:1,a=5*o,s=20*o,h=25*o,l=45,c=0,u=0,f=2,p=0,m=f*o;let[d,M]=[c+r/2,u-s],[g,x]=[d+f,M],[k,y]=[g-p,x+m],[P,b]=[c-r/2,u-h],[I,v]=[P+p,b-m],A=Math.ceil(t/i),_=Math.floor(A/10);A-=8*_;const U=[],S=[];for(let i=0;i<A/2;i++,_--){_<=0&&A%2==1&&i===(A-1)/2&&(P=c,I=P+p,b=(b+M)/2,v=b-m);const[t,n]=w$1(P,b,e,l);if(_>0){const[r,o]=w$1(g,b,e,l),[a,s]=w$1(d,M,e,l);U.push(r),U.push(o),U.push(t),U.push(n),U.push(a),U.push(s);}else {const[r,o]=w$1(g,x,e,l),[a,s]=w$1(k,y,e,l),[i,h]=w$1(I,v,e,l);S.push(t),S.push(n),S.push(i),S.push(h),S.push(a),S.push(s),S.push(r),S.push(o);}b+=a,M+=a,x+=a,y+=a,v+=a;}const[D,F]=w$1(c+r/2,u+s,e,l),j=r/2+f,[N,J]=w$1(c+j,u+s,e,l),[O,q]=w$1(c+r/2,u-h,e,l),[B,E]=w$1(c+j,u-h,e,l);return {pennants:U,barbs:S,shaft:[D,F,N,J,O,q,B,E]}}function w$1(t,e,n,r=1){const o=Math.sqrt(t*t+e*e)/r,a=(2*Math.PI+Math.atan2(e,t))%(2*Math.PI);return [o,(2*Math.PI+a-n)%(2*Math.PI)]}const y$1=[0,1,3,6,10,16,21,27,33,40,47,55,63],P=[0,.5,1,1.5,2],b=[0,.25,.5,1,1.5,2,2.5,3,3.5,4];function I(t,e,n,r){const o=l(r||"knots",n);let a;for(a=1;a<e.length;a++)if(a===e.length-1){if(t<e[a]*o)break}else if(t<=e[a]*o)break;return Math.min(a-1,e.length-2)}function v(t,e,n,r,o){let a=0;switch(e){case"beaufort_kn":a=I(t,y$1,"knots",n);break;case"beaufort_km":a=I(t,y$1,"kilometer-per-hour",n);break;case"beaufort_ft":a=I(t,y$1,"feet-per-second",n);break;case"beaufort_m":a=I(t,y$1,"meter-per-second",n);break;case"classified_arrow":a=I(t,o,r,n);break;case"ocean_current_m":a=I(t,P,"meter-per-second",n);break;case"ocean_current_kn":a=I(t,b,"knots",n);}return a}function A$1(t,e){const{style:n,inputUnit:r,outputUnit:o,breakValues:a}=e,s=h$1.fromJSON(r),i=h$1.fromJSON(o),l=7*6,c=15;let u=0,f=0;const{width:p,height:m,mask:d}=t,M=t.pixels[0],x=t.pixels[1],k=d?d.filter((t=>t>0)).length:p*m,w=new Float32Array(k*l),y=new Uint32Array(c*k);for(let h=0;h<m;h++)for(let t=0;t<p;t++){const e=h*p+t;if(!d||d[h*p+t]){const r=(x[e]+360)%360/180*Math.PI??2*Math.PI*Math.random(),o=v(M[e],n,s,i,a);for(let n=0;n<g$1.length;n+=2)w[u++]=(t+.5)/p,w[u++]=(h+.5)/m,w[u++]=g$1[n],w[u++]=g$1[n+1]+r,w[u++]=o,w[u++]=M[e];const c=7*(u/l-1);y[f++]=c,y[f++]=c+1,y[f++]=c+2,y[f++]=c+0,y[f++]=c+4,y[f++]=c+3,y[f++]=c+0,y[f++]=c+2,y[f++]=c+3,y[f++]=c+2,y[f++]=c+5,y[f++]=c+3,y[f++]=c+5,y[f++]=c+6,y[f++]=c+3;}}return {vertexData:w,indexData:y}}const _=[];function U(t,e){if(0===_.length)for(let i=0;i<30;i++)_.push(k(5*i,0));const n=l(h$1.fromJSON(e.inputUnit),"knots"),{width:r,height:o,mask:a}=t,s=t.pixels[0],c=t.pixels[1],u=6,f=[],p=[];let m=0,d=0;for(let h=0;h<o;h++)for(let t=0;t<r;t++){const e=h*r+t,l=s[e]*n;if((!a||a[h*r+t])&&l>=i){const n=(c[e]+360)%360/180*Math.PI??2*Math.PI*Math.random(),{pennants:a,barbs:s,shaft:i}=_[Math.min(Math.floor(l/5),29)];if(a.length+s.length===0)continue;let M=f.length/u;const g=(t+.5)/r,x=(h+.5)/o;for(let t=0;t<a.length;t+=2)f[m++]=g,f[m++]=x,f[m++]=a[t],f[m++]=a[t+1]+n,f[m++]=0,f[m++]=l;for(let t=0;t<s.length;t+=2)f[m++]=g,f[m++]=x,f[m++]=s[t],f[m++]=s[t+1]+n,f[m++]=0,f[m++]=l;for(let t=0;t<i.length;t+=2)f[m++]=g,f[m++]=x,f[m++]=i[t],f[m++]=i[t+1]+n,f[m++]=0,f[m++]=l;for(let t=0;t<a.length/6;t++)p[d++]=M,p[d++]=M+1,p[d++]=M+2,M+=3;for(let t=0;t<s.length/8;t++)p[d++]=M,p[d++]=M+1,p[d++]=M+2,p[d++]=M+1,p[d++]=M+2,p[d++]=M+3,M+=4;p[d++]=M+0,p[d++]=M+1,p[d++]=M+2,p[d++]=M+1,p[d++]=M+3,p[d++]=M+2,M+=4;}}return {vertexData:new Float32Array(f),indexData:new Uint32Array(p)}}function S(t,e){const n=4*6;let r=0,o=0;const{width:a,height:s,mask:c}=t,u=t.pixels[0],f=[],p=[],m=l(h$1.fromJSON(e.inputUnit),"knots"),d="wind_speed"===e.style?i:Number.MAX_VALUE;for(let i=0;i<s;i++)for(let t=0;t<a;t++){const e=u[i*a+t]*m;if((!c||c[i*a+t])&&e<d){for(let n=0;n<4;n++)f[r++]=(t+.5)/a,f[r++]=(i+.5)/s,f[r++]=n<2?-.5:.5,f[r++]=n%2==0?-.5:.5,f[r++]=0,f[r++]=e;const h=4*(r/n-1);p[o++]=h,p[o++]=h+1,p[o++]=h+2,p[o++]=h+1,p[o++]=h+2,p[o++]=h+3;}}return {vertexData:new Float32Array(f),indexData:new Uint32Array(p)}}function D(t,e){return "simple_scalar"===e.style?S(t,e):"wind_speed"===e.style?U(t,e):A$1(t,e)}function F(t,e,n,o=[0,0],a=.5){const{width:s,height:i,mask:h}=t,[l,c]=t.pixels,[p,m]=o,d=Math.round((s-p)/n),M=Math.round((i-m)/n),g=d*M,x=new Float32Array(g),k=new Float32Array(g),w=new Uint8Array(g),y="vector-uv"===e;for(let r=0;r<M;r++)for(let t=0;t<d;t++){let e=0;const o=r*d+t,M=Math.max(0,r*n+m),g=Math.max(0,t*n+p),P=Math.min(i,M+n),b=Math.min(s,g+n);for(let t=M;t<P;t++)for(let n=g;n<b;n++){const r=t*s+n;if(!h||h[r]){e++;const t=y?[l[r],c[r]]:[l[r],(360+c[r])%360],[n,a]=y?t:f$1(t);x[o]+=n,k[o]+=a;}}if(e>=(P-M)*(b-g)*(1-a)){w[o]=1;const[t,n]=u$1([x[o]/e,k[o]/e]);x[o]=t,k[o]=n;}else w[o]=0,x[o]=0,k[o]=0;}const P=new u$2({width:d,height:M,pixels:[x,k],mask:w});return P.updateStatistics(),P}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const c=s$2.getLogger("esri.views.2d.engine.flow.dataUtils"),f=10;async function u(e,n,r,o){const l=performance.now(),a=h(n,r),s=performance.now(),u=d(n,a,r.width,r.height),m=performance.now(),w=p(u,!0),x=performance.now(),M="Streamlines"===e?g(w,f):y(w),A=performance.now();return a$1("esri-2d-profiler")&&(c.info("I.1","_createFlowFieldFromData (ms)",Math.round(s-l)),c.info("I.2","_getStreamlines (ms)",Math.round(m-s)),c.info("I.3","createAnimatedLinesData (ms)",Math.round(x-m)),c.info("I.4","create{Streamlines|Particles}Mesh (ms)",Math.round(A-x)),c.info("I.5","createFlowMesh (ms)",Math.round(A-l)),c.info("I.6","Mesh size (bytes)",M.vertexData.buffer.byteLength+M.indexData.buffer.byteLength)),await Promise.resolve(),f$2(o),M}function h(t,e){const n=w(e.data,e.width,e.height,t.smoothing);if(t.interpolate){return (t,r)=>{const o=Math.floor(t),i=Math.floor(r);if(o<0||o>=e.width)return [0,0];if(i<0||i>=e.height)return [0,0];const l=t-o,a=r-i,s=o,c=i,f=o<e.width-1?o+1:o,u=i<e.height-1?i+1:i,h=n[2*(c*e.width+s)],m=n[2*(c*e.width+f)],d=n[2*(u*e.width+s)],w=n[2*(u*e.width+f)],p=n[2*(c*e.width+s)+1],g=n[2*(c*e.width+f)+1];return [(h*(1-a)+d*a)*(1-l)+(m*(1-a)+w*a)*l,(p*(1-a)+n[2*(u*e.width+s)+1]*a)*(1-l)+(g*(1-a)+n[2*(u*e.width+f)+1]*a)*l]}}return (t,r)=>{const o=Math.round(t),i=Math.round(r);return o<0||o>=e.width||i<0||i>=e.height?[0,0]:[n[2*(i*e.width+o)+0],n[2*(i*e.width+o)+1]]}}function m(t,e,n,r,o,i,l,a,s){const c=[];let f=n,u=r,h=0,[m,d]=e(f,u);m*=t.velocityScale,d*=t.velocityScale;const w=Math.sqrt(m*m+d*d);let p,g;c.push({x:f,y:u,t:h,speed:w});for(let y=0;y<t.verticesPerLine;y++){let[n,r]=e(f,u);n*=t.velocityScale,r*=t.velocityScale;const m=Math.sqrt(n*n+r*r);if(m<t.minSpeedThreshold)return c;const d=n/m,w=r/m;f+=d*t.segmentLength,u+=w*t.segmentLength;if(h+=t.segmentLength/m,Math.acos(d*p+w*g)>t.maxTurnAngle)return c;if(t.collisions){const t=Math.round(f*s),e=Math.round(u*s);if(t<0||t>l-1||e<0||e>a-1)return c;const n=i[e*l+t];if(-1!==n&&n!==o)return c;i[e*l+t]=o;}c.push({x:f,y:u,t:h,speed:m}),p=d,g=w;}return c}function d(t,e,n,r){const o=[],i=new t$1,a=1/Math.max(t.lineCollisionWidth,1),s=Math.round(n*a),c=Math.round(r*a),f=new Int32Array(s*c);for(let l=0;l<f.length;l++)f[l]=-1;const u=[];for(let l=0;l<r;l+=t.lineSpacing)for(let e=0;e<n;e+=t.lineSpacing)u.push({x:e,y:l,sort:i.getFloat()});u.sort(((t,e)=>t.sort-e.sort));for(const{x:l,y:h}of u)if(i.getFloat()<t.density){const n=m(t,e,l,h,o.length,f,s,c,a);if(n.length<2)continue;o.push(n);}return o}function w(t,e,n,r){if(0===r)return t;const o=Math.round(3*r),i=new Array(2*o+1);let l=0;for(let c=-o;c<=o;c++){const t=Math.exp(-c*c/(r*r));i[c+o]=t,l+=t;}for(let c=-o;c<=o;c++)i[c+o]/=l;const a=new Float32Array(t.length);for(let c=0;c<n;c++)for(let n=0;n<e;n++){let r=0,l=0;for(let a=-o;a<=o;a++){if(n+a<0||n+a>=e)continue;const s=i[a+o];r+=s*t[2*(c*e+(n+a))+0],l+=s*t[2*(c*e+(n+a))+1];}a[2*(c*e+n)+0]=r,a[2*(c*e+n)+1]=l;}const s=new Float32Array(t.length);for(let c=0;c<e;c++)for(let t=0;t<n;t++){let r=0,l=0;for(let s=-o;s<=o;s++){if(t+s<0||t+s>=n)continue;const f=i[s+o];r+=f*a[2*((t+s)*e+c)+0],l+=f*a[2*((t+s)*e+c)+1];}s[2*(t*e+c)+0]=r,s[2*(t*e+c)+1]=l;}return s}function p(t,e){const n=new t$1,r=t.reduce(((t,e)=>t+e.length),0),o=new Float32Array(4*r),i=new Array(t.length);let a=0,s=0;for(const l of t){const t=a;for(const e of l)o[4*a+0]=e.x,o[4*a+1]=e.y,o[4*a+2]=e.t,o[4*a+3]=e.speed,a++;i[s++]={startVertex:t,numberOfVertices:l.length,totalTime:l[l.length-1].t,timeSeed:e?n.getFloat():0};}return {lineVertices:o,lineDescriptors:i}}function g(t,e){const n=9,{lineVertices:r,lineDescriptors:o}=t;let i=0,l=0;for(const m of o){i+=2*m.numberOfVertices;l+=6*(m.numberOfVertices-1);}const a=new Float32Array(i*n),s=new Uint32Array(l);let c=0,f=0;function u(){s[f++]=c-2,s[f++]=c,s[f++]=c-1,s[f++]=c,s[f++]=c+1,s[f++]=c-1;}function h(t,e,r,o,i,l,s,f){const u=c*n;let h=0;a[u+h++]=t,a[u+h++]=e,a[u+h++]=1,a[u+h++]=r,a[u+h++]=l,a[u+h++]=s,a[u+h++]=o/2,a[u+h++]=i/2,a[u+h++]=f,c++,a[u+h++]=t,a[u+h++]=e,a[u+h++]=-1,a[u+h++]=r,a[u+h++]=l,a[u+h++]=s,a[u+h++]=-o/2,a[u+h++]=-i/2,a[u+h++]=f,c++;}for(const m of o){const{totalTime:t,timeSeed:n}=m;let o=null,i=null,l=null,a=null,s=null,c=null;for(let f=0;f<m.numberOfVertices;f++){const d=r[4*(m.startVertex+f)+0],w=r[4*(m.startVertex+f)+1],p=r[4*(m.startVertex+f)+2],g=r[4*(m.startVertex+f)+3];let y=null,x=null,M=null,A=null;if(f>0){y=d-o,x=w-i;const r=Math.sqrt(y*y+x*x);if(y/=r,x/=r,f>1){let t=y+s,n=x+c;const r=Math.sqrt(t*t+n*n);t/=r,n/=r;const o=Math.min(1/(t*y+n*x),e);t*=o,n*=o,M=-n,A=t;}else M=-x,A=y;null!==M&&null!==A&&(h(o,i,l,M,A,t,n,g),u());}o=d,i=w,l=p,s=y,c=x,a=g;}h(o,i,l,-c,s,t,n,a);}return {vertexData:a,indexData:s}}function y(t){const e=16,n=1,r=2,{lineVertices:o,lineDescriptors:i}=t;let l=0,a=0;for(const j of i){const t=j.numberOfVertices-1;l+=4*t*2,a+=6*t*2;}const s=new Float32Array(l*e),c=new Uint32Array(a);let f,u,h,m,d,w,p,g,y,x,M,A,I,V,F=0,D=0;function b(){c[D++]=F-8,c[D++]=F-7,c[D++]=F-6,c[D++]=F-7,c[D++]=F-5,c[D++]=F-6,c[D++]=F-4,c[D++]=F-3,c[D++]=F-2,c[D++]=F-3,c[D++]=F-1,c[D++]=F-2;}function v(t,o,i,l,a,c,f,u,h,m,d,w,p,g){const y=F*e;let x=0;for(const e of [n,r])for(const n of [1,2,3,4])s[y+x++]=t,s[y+x++]=o,s[y+x++]=i,s[y+x++]=l,s[y+x++]=f,s[y+x++]=u,s[y+x++]=h,s[y+x++]=m,s[y+x++]=e,s[y+x++]=n,s[y+x++]=p,s[y+x++]=g,s[y+x++]=a/2,s[y+x++]=c/2,s[y+x++]=d/2,s[y+x++]=w/2,F++;}function S(t,e){let n=y+M,r=x+A;const o=Math.sqrt(n*n+r*r);n/=o,r/=o;const i=y*n+x*r;n/=i,r/=i;let l=M+I,a=A+V;const s=Math.sqrt(l*l+a*a);l/=s,a/=s;const c=M*l+A*a;l/=c,a/=c,v(f,u,h,m,-r,n,d,w,p,g,-a,l,t,e),b();}function k(t,e,n,r,o,i){if(y=M,x=A,M=I,A=V,null==y&&null==x&&(y=M,x=A),null!=d&&null!=w){I=t-d,V=e-w;const n=Math.sqrt(I*I+V*V);I/=n,V/=n;}null!=y&&null!=x&&S(o,i),f=d,u=w,h=p,m=g,d=t,w=e,p=n,g=r;}function L(t,e){y=M,x=A,M=I,A=V,null==y&&null==x&&(y=M,x=A),null!=y&&null!=x&&S(t,e);}for(const j of i){f=null,u=null,h=null,m=null,d=null,w=null,p=null,g=null,y=null,x=null,M=null,A=null,I=null,V=null;const{totalTime:t,timeSeed:e}=j;for(let n=0;n<j.numberOfVertices;n++){k(o[4*(j.startVertex+n)+0],o[4*(j.startVertex+n)+1],o[4*(j.startVertex+n)+2],o[4*(j.startVertex+n)+3],t,e);}L(t,e);}return {vertexData:s,indexData:c}}function x(t,e){const r=e.pixels,{width:o,height:i}=e,l=new Float32Array(o*i*2),a=e.mask||new Uint8Array(o*i*2);if(e.mask||a.fill(255),"vector-uv"===t)for(let n=0;n<o*i;n++)l[2*n+0]=r[0][n],l[2*n+1]=-r[1][n];else if("vector-magdir"===t)for(let s=0;s<o*i;s++){const t=r[0][s],e=M$3(r[1][s]),o=Math.cos(e-Math.PI/2),i=Math.sin(e-Math.PI/2);l[2*s+0]=o*t,l[2*s+1]=i*t;}return {data:l,mask:a,width:o,height:i}}async function M(e,n,r,o,i,l){const f=performance.now(),u=R(n.spatialReference);if(!u){const a=await A(e,n,r,o,i,l);return a$1("esri-2d-profiler")&&c.info("I.7","loadImagery, early exit (ms)",Math.round(performance.now()-f)),a$1("esri-2d-profiler")&&c.info("I.9","Number of parts",1),a}const[h,m]=u.valid,d=m-h,w=Math.ceil(n.width/d),p=n.width/w,g=Math.round(r/w);let y=n.xmin;const x=[],M=performance.now();for(let t=0;t<w;t++){const t=new M$2({xmin:y,xmax:y+p,ymin:n.ymin,ymax:n.ymax,spatialReference:n.spatialReference});x.push(A(e,t,g,o,i,l)),y+=p;}const I=await Promise.all(x);a$1("esri-2d-profiler")&&c.info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-M)),a$1("esri-2d-profiler")&&c.info("I.9","Number of parts",I.length);const V={data:new Float32Array(r*o*2),mask:new Uint8Array(r*o),width:r,height:o};let F=0;for(const t of I){for(let e=0;e<t.height;e++)for(let n=0;n<t.width;n++)F+n>=r||(V.data[2*(e*r+F+n)+0]=t.data[2*(e*t.width+n)+0],V.data[2*(e*r+F+n)+1]=t.data[2*(e*t.width+n)+1],V.mask[e*r+F+n]=t.mask[e*t.width+n]);F+=t.width;}return a$1("esri-2d-profiler")&&c.info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-f)),V}async function A(t$1,e,n,i,l,a){const s={requestProjectedLocalDirections:!0,signal:a};if(r(l)&&(s.timeExtent=l),"imagery"===t$1.type){await t$1.load({signal:a});const o=t$1.rasterInfo.dataType,l=await t$1.fetchImage(e,n,i,s);return !l||t(l.pixelData)||t(l.pixelData.pixelBlock)?{data:new Float32Array(n*i*2),mask:new Uint8Array(n*i),width:n,height:i}:x(o,l.pixelData.pixelBlock)}await t$1.load({signal:a});const c=t$1.rasterInfo.dataType,f=await t$1.fetchPixels(e,n,i,s);return !f||t(f.pixelBlock)?{data:new Float32Array(n*i*2),mask:new Uint8Array(n*i),width:n,height:i}:x(c,f.pixelBlock)}

export { D, F, M$1 as M, S, M as a, u$1 as b, d$1 as d, h$1 as h, l, m$1 as m, p$1 as p, u };
//# sourceMappingURL=dataUtils.31524120.js.map
